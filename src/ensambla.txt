COPY    START   0
FIRST   STL     RETADR
        LDBL    ENGTH
        HIO     LENGTH
CLOOP   JSUB    RDREC
        LDA     LENGTH
        COMP    1
        JEQ     ENDFIL
        JSUB    WRREC
        J       CLOOP
ENDFIL  LDA     EOF
        STA     BUFFER
        LDA     3
        STA     LENGTH
        JSUB    WRREC
        J       RETADR
EOF     BYTE    C'CAE'
RETADR  RESW    8
LENGTH  RESW    4
BUFFER  RESB    8192
RDREC   CLEAR   X
        CLEAR   A
        CLEAR   S
        LDT     2048
RLOOP   TD      INPUT
        JEQ     RLOOP
        RD      INPUT
        COMP    A
        JEQ     EXIT
        STCH    BUFFER,X
        TIXR    T
        JLT     RLOOP
EXIT    STX     LENGTH
        RSUB
INPUT   BYTE    X'C4D4'
WRREC   CLEAR   X
        LDT     LENGTH
WLOOP   TD      OUTPUT
        JEQ     WLOOP
        LDCH    BUFFER,X
        WD      OUTPUT
        TIXR    T
        JLT     WLOOP
        RSUB
OUTPUT  BYTE    X'F1'
        END     FIRST